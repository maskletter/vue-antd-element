{"version":3,"sources":["webpack:///./src/views/components/crop.tsx","webpack:///./src/assets/img1.png","webpack:///./src/components/cropper.tsx","webpack:///./node_modules/ant-design-vue/es/back-top/backTopTypes.js","webpack:///./node_modules/ant-design-vue/es/_util/getScroll.js","webpack:///./node_modules/ant-design-vue/es/_util/easings.js","webpack:///./node_modules/ant-design-vue/es/_util/scrollTo.js","webpack:///./node_modules/ant-design-vue/es/back-top/index.js","webpack:///./src/components/admin/page.tsx"],"names":["$cropper","cropperUrl","console","log","value","alert","toDataURL","module","exports","Cropper","props","content","cropper","$el","methods","getCroppedCanvas","this","getData","getCropBoxData","getContainerData","getImageData","setData","data","setDragMode","dragMode","setCropBoxData","setCanvasData","setAspectRatio","aspectRatio","Throttling","time","timeout","callback","setTimeout","viewMode","crop","e","emit","width","height","src","String","Number","Object","modelValue","CropperModel","visible","close","onClose","Function","CropperOpen","$div","document","getElementById","createElement","id","body","appendChild","app","unmount","mount","visibilityHeight","number","target","func","prefixCls","string","onClick","getScroll","top","window","prop","method","isWindow","ret","documentElement","easeInOutCubic","t","b","c","d","cc","scrollTo","y","options","arguments","length","undefined","_options$getContainer","getContainer","_options$duration","duration","container","scrollTop","startTime","Date","now","frameFunc","timestamp","nextScrollTop","pageXOffset","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","i","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","configurable","writable","getDefaultTarget","backTopTypes","BackTop","name","inheritAttrs","mixins","BaseMixin","def","setup","configProvider","scrollEvent","mounted","_this","$nextTick","getTarget","addEventListener","handleScroll","beforeUnmount","remove","getCurrentScrollTop","targetNode","pageYOffset","scrollToTop","_this$target","$emit","_this$target2","setState","render","customizePrefixCls","$slots","getPrefixCls","classString","$attrs","class","defaultElement","concat","divProps","backTopBtn","default","transitionProps","getTransitionProps","component","GeminiScrollbar","Page","myScrollbar","$scroll","element","create","_viewElement","destroy","position","background","color","overflow","padding","boxSizing","title","fontSize","marginBottom","letterSpacing","slots","type"],"mappings":"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","file":"js/chunk-66cc9dbe.254a76a9.js","sourcesContent":["import { defineComponent, ref, onMounted } from 'vue';\nimport Page from '@/components/admin/page';\nimport Cropper, { CropperMethods, CropperOpen } from '@/components/cropper';\nimport { Button } from 'ant-design-vue'\nimport Img1 from '@/assets/img1.png'\nimport Br from '@/components/br';\n\n\n\nexport default defineComponent(() => {\n\n    const $cropper = ref<CropperMethods>();\n    const cropperUrl = ref('');\n\n    onMounted(() => {\n        console.log($cropper)\n    })\n\n    return () => <Page title='图片裁剪'>\n        <Cropper v-model={cropperUrl.value} cropper={$cropper} src={Img1} width={400} height={200} />\n        <Br />\n        <h3>裁剪的图片</h3>\n        <Br />\n        <img width={200} src={cropperUrl.value} alt=\"\"/>\n        <Button type='primary' onClick={() =>alert($cropper.value?.toDataURL())}>读取裁剪的url</Button>\n        <Br />\n        <Button type='primary' onClick={() =>CropperOpen(Img1)}>弹窗形式调用</Button>\n    </Page>\n\n})","module.exports = __webpack_public_path__ + \"img/img1.43dc9686.png\";","import { defineComponent, createApp, ref, onMounted, Ref } from 'vue';\nimport { Modal } from 'ant-design-vue'\nimport CropperJs from 'cropperjs'\nimport 'cropperjs/dist/cropper.css'\n\n\nexport interface CropperMethods {\n    getCroppedCanvas: () => HTMLCanvasElement\n    toDataURL: () => string\n    getData: () => Cropper.Data\n    getCropBoxData: () => Cropper.CropBoxData\n    getContainerData: () => Cropper.ContainerData\n    getImageData(): Cropper.ImageData\n    setData(data: Cropper.SetDataOptions): void\n    setDragMode(dragMode: Cropper.DragMode): void\n    setCropBoxData(data: Cropper.SetCropBoxDataOptions): void\n    setCanvasData(data: Cropper.SetCanvasDataOptions): void\n    setAspectRatio(aspectRatio: number): void\n    $cropper: CropperJs\n}\n\ninterface CropperInterface {\n\n    src?: string\n    width?: number\n    height?: number\n    cropper?: Ref<CropperMethods | undefined>\n    value?: string\n\n}\n\nconst Cropper = defineComponent((props: CropperInterface, content) => {\n\n    const $el = ref();\n    let cropper: CropperJs;\n\n    const methods = {\n        getCroppedCanvas(): HTMLCanvasElement{\n            return cropper.getCroppedCanvas()\n        },\n        toDataURL(): string{\n            return this.getCroppedCanvas().toDataURL()\n        },\n        getData(): Cropper.Data{\n            return cropper.getData()\n        },\n        getCropBoxData(): Cropper.CropBoxData{\n            return cropper.getCropBoxData()\n        },\n        getContainerData(): Cropper.ContainerData{\n            return cropper.getContainerData()\n        },\n        getImageData(): Cropper.ImageData{\n            return cropper.getImageData()\n        },\n        setData(data: Cropper.SetDataOptions): void{\n            cropper.setData(data)\n        },\n        setDragMode(dragMode: Cropper.DragMode): void{\n            cropper.setDragMode(dragMode)\n        },\n        setCropBoxData(data: Cropper.SetCropBoxDataOptions): void{\n            cropper.setCropBoxData(data)\n        },\n        setCanvasData(data: Cropper.SetCanvasDataOptions): void{\n            cropper.setCanvasData(data)\n        },\n        setAspectRatio(aspectRatio: number): void{\n            cropper.setAspectRatio(aspectRatio)\n        }\n    }\n\n    const Throttling = (time: number = 300) => {\n        let timeout: any = null;\n        return (callback: Function) => {\n            if(timeout != null) return;\n            timeout = setTimeout(() => {\n                callback()\n                timeout = null;\n            }, time)\n        }\n    }\n    \n    onMounted(() => {\n        const crop = Throttling();\n        cropper = new CropperJs($el.value, {\n            aspectRatio:  4 / 4,\n            viewMode: 1,\n            crop: (e: any) => {\n                crop(() => {\n                    content.emit('update:modelValue', methods.toDataURL())\n                    console.log(e)\n                })\n                \n                \n            }\n        })\n        if(props.cropper) {\n            props.cropper.value = {\n                ...methods,\n                $cropper: cropper\n            };\n        }\n    })\n\n    return () => <div style={{width: props.width+'px', height: props.height+'px'}}>\n        <img ref={$el} src={props.src} alt=\"\"/>\n    </div>\n\n})\n\nCropper.props = {\n    src: String,\n    width: Number,\n    height: Number,\n    cropper: Object,\n    modelValue: String,\n    value: String\n} as any\n\nconst CropperModel = defineComponent((props: { src: string, onClose?: () => void }) => {\n\n    const visible = ref(true);\n    const close = () => {\n        visible.value = false;\n        setTimeout(() => {\n            props.onClose && props.onClose();\n        }, 300)\n    }\n\n    return () => <Modal\n        visible={visible.value}\n        onOk={close}\n        onCancel={close}>\n        <Cropper src={props.src} />\n    </Modal>\n})\nCropperModel.props = {\n    onClose: Function,\n    src: String\n} as any\n\nconst CropperOpen = (src: string) => {\n\n\n    let $div = document.getElementById('cropper-dialog-div');\n    if(!$div) {\n        $div = document.createElement('div')\n        $div.id = 'cropper-dialog-div'\n        document.body.appendChild($div);\n    }\n    // $div.innerHTML = '<div id=\"cropper-dialog-wrapper\"></div>'\n    \n\n    const app = createApp(<CropperModel src={src} onClose={() => {\n        app.unmount($div as HTMLElement);\n    }} />);\n    app.mount($div);\n\n}\n\nexport { CropperOpen }\n\nexport default Cropper;","import PropTypes from '../_util/vue-types';\nexport default (function () {\n  return {\n    visibilityHeight: PropTypes.number,\n    // onClick?: React.MouseEventHandler<any>;\n    target: PropTypes.func,\n    prefixCls: PropTypes.string,\n    onClick: PropTypes.func // visible: PropTypes.bool, // Only for test. Don't use it.\n\n  };\n});","export default function getScroll(target, top) {\n  if (typeof window === 'undefined') {\n    return 0;\n  }\n\n  var prop = top ? 'pageYOffset' : 'pageXOffset';\n  var method = top ? 'scrollTop' : 'scrollLeft';\n  var isWindow = target === window;\n  var ret = isWindow ? target[prop] : target[method]; // ie6,7,8 standard mode\n\n  if (isWindow && typeof ret !== 'number') {\n    ret = window.document.documentElement[method];\n  }\n\n  return ret;\n}","export function easeInOutCubic(t, b, c, d) {\n  var cc = c - b;\n  t /= d / 2;\n\n  if (t < 1) {\n    return cc / 2 * t * t * t + b;\n  }\n\n  return cc / 2 * ((t -= 2) * t * t + 2) + b;\n}","import raf from 'raf';\nimport getScroll from './getScroll';\nimport { easeInOutCubic } from './easings'; // interface ScrollToOptions {\n//   /** Scroll container, default as window */\n//   getContainer?: () => HTMLElement | Window;\n//   /** Scroll end callback */\n//   callback?: () => any;\n//   /** Animation duration, default as 450 */\n//   duration?: number;\n// }\n\nexport default function scrollTo(y) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$getContainer = options.getContainer,\n      getContainer = _options$getContainer === void 0 ? function () {\n    return window;\n  } : _options$getContainer,\n      callback = options.callback,\n      _options$duration = options.duration,\n      duration = _options$duration === void 0 ? 450 : _options$duration;\n  var container = getContainer();\n  var scrollTop = getScroll(container, true);\n  var startTime = Date.now();\n\n  var frameFunc = function frameFunc() {\n    var timestamp = Date.now();\n    var time = timestamp - startTime;\n    var nextScrollTop = easeInOutCubic(time > duration ? duration : time, scrollTop, y, duration);\n\n    if (container === window) {\n      window.scrollTo(window.pageXOffset, nextScrollTop);\n    } else {\n      container.scrollTop = nextScrollTop;\n    }\n\n    if (time < duration) {\n      raf(frameFunc);\n    } else if (typeof callback === 'function') {\n      callback();\n    }\n  };\n\n  raf(frameFunc);\n}","import * as _vue from \"vue\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { inject, Transition } from 'vue';\nimport classNames from 'classnames';\nimport PropTypes from '../_util/vue-types';\nimport backTopTypes from './backTopTypes';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport getScroll from '../_util/getScroll';\nimport BaseMixin from '../_util/BaseMixin';\nimport getTransitionProps from '../_util/getTransitionProps';\nimport { ConfigConsumerProps } from '../config-provider';\nimport scrollTo from '../_util/scrollTo';\n\nfunction getDefaultTarget() {\n  return window;\n}\n\nvar props = backTopTypes();\nvar BackTop = {\n  name: 'ABackTop',\n  inheritAttrs: false,\n  mixins: [BaseMixin],\n  props: _objectSpread(_objectSpread({}, props), {}, {\n    visibilityHeight: PropTypes.number.def(400)\n  }),\n  setup: function setup() {\n    return {\n      configProvider: inject('configProvider', ConfigConsumerProps)\n    };\n  },\n  data: function data() {\n    this.scrollEvent = null;\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var getTarget = _this.target || getDefaultTarget;\n      _this.scrollEvent = addEventListener(getTarget(), 'scroll', _this.handleScroll);\n\n      _this.handleScroll();\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  },\n  methods: {\n    getCurrentScrollTop: function getCurrentScrollTop() {\n      var getTarget = this.target || getDefaultTarget;\n      var targetNode = getTarget();\n\n      if (targetNode === window) {\n        return window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n      }\n\n      return targetNode.scrollTop;\n    },\n    scrollToTop: function scrollToTop(e) {\n      var _this$target = this.target,\n          target = _this$target === void 0 ? getDefaultTarget : _this$target;\n      scrollTo(0, {\n        getContainer: target\n      });\n      this.$emit('click', e);\n    },\n    handleScroll: function handleScroll() {\n      var visibilityHeight = this.visibilityHeight,\n          _this$target2 = this.target,\n          target = _this$target2 === void 0 ? getDefaultTarget : _this$target2;\n      var scrollTop = getScroll(target(), true);\n      this.setState({\n        visible: scrollTop > visibilityHeight\n      });\n    }\n  },\n  render: function render() {\n    var customizePrefixCls = this.prefixCls,\n        $slots = this.$slots;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('back-top', customizePrefixCls);\n    var classString = classNames(prefixCls, this.$attrs.class);\n\n    var defaultElement = _vue.createVNode(\"div\", {\n      \"class\": \"\".concat(prefixCls, \"-content\")\n    }, [_vue.createVNode(\"div\", {\n      \"class\": \"\".concat(prefixCls, \"-icon\")\n    }, null)]);\n\n    var divProps = _objectSpread(_objectSpread({}, this.$attrs), {}, {\n      onClick: this.scrollToTop,\n      class: classString\n    });\n\n    var backTopBtn = this.visible ? _vue.createVNode(\"div\", divProps, [$slots.default && $slots.default() || defaultElement]) : null;\n    var transitionProps = getTransitionProps('fade');\n    return _vue.createVNode(Transition, transitionProps, {\n      default: function _default() {\n        return [backTopBtn];\n      }\n    });\n  }\n};\n/* istanbul ignore next */\n\nBackTop.install = function (app) {\n  app.component(BackTop.name, BackTop);\n};\n\nexport default BackTop;","import { defineComponent, getCurrentInstance, KeepAlive, ref, ComponentInternalInstance, VNode, onUnmounted, onMounted, onActivated, inject } from 'vue';\nimport { BackTop } from 'ant-design-vue'\nimport { onBeforeRouteLeave } from 'vue-router'\nconst GeminiScrollbar = require('gemini-scrollbar')\nimport 'gemini-scrollbar/gemini-scrollbar.css'\n\n\ninterface PageInterface {\n    color?: string\n    title?: string|VNode\n}\n\nconst Page = defineComponent((props: PageInterface, content) => {\n    const scrollTop = ref(0);\n    const $el: any = ref<Element | ComponentInternalInstance | null>(null);\n    const $scroll = ref();\n    let myScrollbar: any;\n\n    // onBeforeRouteLeave((to, from, next) => {\n    //     scrollTop.value = $el.value.scrollTop;\n    //     next();\n    // })\n\n    onMounted(() => {\n        \n        myScrollbar = new GeminiScrollbar({\n            element: $scroll.value\n        }).create();\n        $el.value = myScrollbar._viewElement;\n    })\n\n    onActivated(() => {\n        // console.log(getCurrentInstance())\n    })\n\n\n    onActivated(() => {\n        scrollTop.value && (myScrollbar._viewElement.scrollTop = scrollTop.value);\n    })\n\n    onUnmounted(() => {\n        myScrollbar.destroy();\n    })\n\n\n    return () => <div style={{ position: 'relative', background: props.color, height: '100%', overflow: 'auto'}}>\n        <div ref={$scroll}>\n            <div style={{ padding: '10px 20px', boxSizing: 'border-box' }}>\n                { props.title && <div style={{fontSize: '30px', marginBottom: '20px', letterSpacing: '2px'}}>{props.title}</div> }\n                { content.slots.default && content.slots.default() }\n            </div>\n            \n        </div>\n        \n        <BackTop target={() => $el.value} />\n    </div>\n\n})\nPage.props = {\n    color: {\n        type: String,\n        default: '#f5f5f5'\n    },\n    title: {\n        type: [String, String]\n    }\n}\n\nexport default Page;"],"sourceRoot":""}
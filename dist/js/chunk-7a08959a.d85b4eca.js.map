{"version":3,"sources":["webpack:///./src/components/ckeditor.tsx","webpack:///./src/views/rich-text/ckeditor.tsx","webpack:///./src/components/admin/page.tsx"],"names":["Ckeditor","props","content","ckeditor","$input","_value","init","modelValue","val","setData","CKEDITOR","replace","value","height","on","getData","emit","destroy","console","log","type","Number","default","String","GeminiScrollbar","Page","myScrollbar","scrollTop","$el","$scroll","element","create","_viewElement","position","background","color","overflow","padding","boxSizing","title","fontSize","marginBottom","letterSpacing","slots"],"mappings":"+JAIMA,G,8BAAW,gBAAgB,SAACC,EAA4CC,GAE1E,IAAIC,EACEC,EAAS,iBACXC,EAAiB,GAGrB,gBAAU,WACNC,IACA,iBAAM,kBAAOL,EAAcM,cAAY,SAACC,GACjCA,GAAOH,GACVF,EAASM,QAAQD,SAIzB,IAAMF,EAAO,WACTH,EAAWO,SAASC,QAAQP,EAAOQ,MAAc,CAC7CC,OAAQZ,EAAMY,SAqBlBV,EAASM,QAASR,EAAcM,YAAcN,EAAMW,OAAS,IAC7DT,EAASW,GAAG,UAAU,WAClBT,EAASF,EAASY,UAClBb,EAAQc,KAAK,oBAAqBX,OAoB1C,OAhBA,gBAAY,WACRC,OAGJ,gBAAc,WAAK,MAIP,QAAR,EAAAH,SAAA,SAAUc,aAGd,gBAAY,WAAK,MACbC,QAAQC,IAAI,eACJ,QAAR,EAAAhB,SAAA,SAAUc,aAGP,4DACYb,GADZ,aAMXJ,EAASC,MAAQ,CACbY,OAAQ,CACJO,KAAMC,OACNC,QAAS,KAEbf,WAAYgB,OACZX,MAAOW,QAGI,Q,wBCzEA,6BAAgB,WAG3B,IAAMX,EAAQ,eAAI,OAElB,OAAO,yBAAC,aAAD,iCAAC,QAAD,MACS,QADT,2BAEEA,EAAMA,UAFR,OAAC,4BAAD,WAKgBA,EAAMA,MALtB,yCAKgBA,EAAMA,MALtB,mB,0ECTLY,G,UAAkB,EAAQ,SAS1BC,EAAO,gBAAgB,SAACxB,EAAsBC,GAChD,IAGIwB,EAHEC,EAAY,eAAI,GAChBC,EAAW,eAAgD,MAC3DC,EAAU,iBA8BhB,OAtBA,gBAAU,WAENH,EAAc,IAAIF,EAAgB,CAC9BM,QAASD,EAAQjB,QAClBmB,SACHH,EAAIhB,MAAQc,EAAYM,gBAG5B,gBAAY,eAKZ,gBAAY,WACRL,EAAUf,QAAUc,EAAYM,aAAaL,UAAYA,EAAUf,UAGvE,gBAAY,WACRc,EAAYT,aAIT,sCAAkB,CAAEgB,SAAU,WAAYC,WAAYjC,EAAMkC,MAAOtB,OAAQ,OAAQuB,SAAU,SAA7F,mBACOP,GADP,qBAEa,CAAEQ,QAAS,YAAaC,UAAW,eAFhD,CAGOrC,EAAMsC,OAAN,oBAA2B,CAACC,SAAU,OAAQC,aAAc,OAAQC,cAAe,QAAnF,CAA4FzC,EAAMsC,QAClGrC,EAAQyC,MAAMrB,SAAWpB,EAAQyC,MAAMrB,cAJ9C,OAAC,QAAD,OASc,kBAAMM,EAAIhB,QATxB,YAaXa,EAAKxB,MAAQ,CACTkC,MAAO,CACHf,KAAMG,OACND,QAAS,WAEbiB,MAAO,CACHnB,KAAM,CAACG,OAAQA,UAIR","file":"js/chunk-7a08959a.d85b4eca.js","sourcesContent":["import { defineComponent, ref, onMounted, watch, onDeactivated, onActivated, onUnmounted } from \"vue\"\r\n// import CKEDITOR from 'CKEDITOR'\r\n\r\n\r\nconst Ckeditor = defineComponent((props: { height?: number, value?: string }, content) => {\r\n\r\n    let ckeditor!: CKEDITOR.editor\r\n    const $input = ref();\r\n    let _value: string = '';\r\n\r\n    \r\n    onMounted(() => {\r\n        init();\r\n        watch(() => (props as any).modelValue, (val) => {\r\n            if(val == _value) return;\r\n            ckeditor.setData(val);\r\n        })\r\n    })\r\n\r\n    const init = () => {\r\n        ckeditor = CKEDITOR.replace($input.value as any, {\r\n            height: props.height,\r\n            // toolbar: [\r\n            //     //加粗     斜体，     下划线      穿过线      下标字        上标字\r\n            //     ['Bold','Italic','Underline','Strike','Subscript','Superscript'],\r\n            //     // 数字列表          实体列表            减小缩进    增大缩进\r\n            //     ['NumberedList','BulletedList','-','Outdent','Indent'],\r\n            //     //左对 齐             居中对齐          右对齐          两端对齐\r\n            //     ['JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock'],\r\n            //     //超链接  取消超链接 锚点\r\n            //     ['Link','Unlink','Anchor'],\r\n            //     //图片    flash    表格       水平线            表情       特殊字符        分页符\r\n            //     ['Image','Flash','Table','HorizontalRule','Smiley','SpecialChar','PageBreak'],\r\n            //     '/',\r\n            //     // 样式       格式      字体    字体大小\r\n            //     ['Styles','Format','Font','FontSize'],\r\n            //     //文本颜色     背景颜色\r\n            //     ['TextColor','BGColor'],\r\n            //     //全屏           显示区块\r\n            //     ['Maximize', 'ShowBlocks','-']\r\n            //  ]\r\n        });\r\n        ckeditor.setData((props as any).modelValue || props.value || '')\r\n        ckeditor.on('change', () => {\r\n            _value = ckeditor.getData()\r\n            content.emit('update:modelValue', _value)\r\n        })\r\n    }\r\n\r\n    onActivated(() => {\r\n        init();\r\n    })\r\n\r\n    onDeactivated(() => {\r\n        /**\r\n         * ckeditor在keep-alive下回导致异常，因此需要手动销毁\r\n         */\r\n        ckeditor?.destroy();\r\n    })\r\n\r\n    onUnmounted(() => {\r\n        console.log('onUnmounted')\r\n        ckeditor?.destroy();\r\n    })\r\n\r\n    return () => <div>\r\n        <textarea ref={$input}></textarea>\r\n    </div>\r\n\r\n})\r\n\r\nCkeditor.props = {\r\n    height: {\r\n        type: Number,\r\n        default: 400\r\n    },\r\n    modelValue: String,\r\n    value: String\r\n} as any\r\n\r\nexport default Ckeditor;","import { ref, defineComponent } from 'vue';\r\nimport Page from '@/components/admin/page';\r\nimport Ckeditor from '@/components/ckeditor';\r\nimport { Card } from 'ant-design-vue';\r\nimport Br from '@/components/br';\r\n\r\n\r\nexport default defineComponent(() => {\r\n\r\n\r\n    const value = ref('222');\r\n\r\n    return () => <Page>\r\n        <Card title='编辑内容'>\r\n            {value.value}\r\n        </Card>\r\n        <Br />\r\n        <Ckeditor v-model={value.value} />\r\n    </Page>\r\n\r\n})","import { defineComponent, getCurrentInstance, KeepAlive, ref, ComponentInternalInstance, VNode, onUnmounted, onMounted, onActivated, inject } from 'vue';\r\nimport { BackTop } from 'ant-design-vue'\r\nimport { onBeforeRouteLeave } from 'vue-router'\r\nconst GeminiScrollbar = require('gemini-scrollbar')\r\nimport 'gemini-scrollbar/gemini-scrollbar.css'\r\n\r\n\r\ninterface PageInterface {\r\n    color?: string\r\n    title?: string|VNode\r\n}\r\n\r\nconst Page = defineComponent((props: PageInterface, content) => {\r\n    const scrollTop = ref(0);\r\n    const $el: any = ref<Element | ComponentInternalInstance | null>(null);\r\n    const $scroll = ref();\r\n    let myScrollbar: any;\r\n\r\n    // onBeforeRouteLeave((to, from, next) => {\r\n    //     scrollTop.value = $el.value.scrollTop;\r\n    //     next();\r\n    // })\r\n\r\n    onMounted(() => {\r\n        \r\n        myScrollbar = new GeminiScrollbar({\r\n            element: $scroll.value\r\n        }).create();\r\n        $el.value = myScrollbar._viewElement;\r\n    })\r\n\r\n    onActivated(() => {\r\n        // console.log(getCurrentInstance())\r\n    })\r\n\r\n\r\n    onActivated(() => {\r\n        scrollTop.value && (myScrollbar._viewElement.scrollTop = scrollTop.value);\r\n    })\r\n\r\n    onUnmounted(() => {\r\n        myScrollbar.destroy();\r\n    })\r\n\r\n\r\n    return () => <div style={{ position: 'relative', background: props.color, height: '100%', overflow: 'auto'}}>\r\n        <div ref={$scroll}>\r\n            <div style={{ padding: '10px 20px', boxSizing: 'border-box' }}>\r\n                { props.title && <div style={{fontSize: '30px', marginBottom: '20px', letterSpacing: '2px'}}>{props.title}</div> }\r\n                { content.slots.default && content.slots.default() }\r\n            </div>\r\n            \r\n        </div>\r\n        \r\n        <BackTop target={() => $el.value} />\r\n    </div>\r\n\r\n})\r\nPage.props = {\r\n    color: {\r\n        type: String,\r\n        default: '#f5f5f5'\r\n    },\r\n    title: {\r\n        type: [String, String]\r\n    }\r\n}\r\n\r\nexport default Page;"],"sourceRoot":""}